<?xml version="1.0" encoding="utf-8"?>

<feed xmlns="http://www.w3.org/2005/Atom" >
  <generator uri="https://jekyllrb.com/" version="3.9.0">Jekyll</generator>
  <link href="https://www.briglamoreaux.com/tag/cloud/feed.xml" rel="self" type="application/atom+xml" />
  <link href="https://www.briglamoreaux.com/" rel="alternate" type="text/html" />
  <updated>2023-03-15T00:27:36+00:00</updated>
  <id>https://www.briglamoreaux.com/tag/cloud/feed.xml</id>

  
  
  

  
    <title type="html">Brig Lamoreaux | </title>
  

  
    <subtitle>Long term storage for a forgetful mind</subtitle>
  

  

  
    
      
    
  

  
  

  
    <entry>
      <title type="html">Update Minecraft Server</title>
      <link href="https://www.briglamoreaux.com/2023/03/13/update-minecraft-server.html" rel="alternate" type="text/html" title="Update Minecraft Server" />
      <published>2023-03-13T00:00:00+00:00</published>
      <updated>2023-03-13T00:00:00+00:00</updated>
      <id>https://www.briglamoreaux.com/2023/03/13/update-minecraft-server</id>
      <content type="html" xml:base="https://www.briglamoreaux.com/2023/03/13/update-minecraft-server.html">&lt;p&gt;It’s that time of year again when I need to update the minecraft server but I forgot how.&lt;/p&gt;

&lt;p&gt;Looks like the installed version is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minecraft_server.1.19.2.jar&lt;/code&gt; and the latest is &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;minecraft_server.1.19.3.jar&lt;/code&gt;&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;c&quot;&gt;# Let's update the basics&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get update

&lt;span class=&quot;c&quot;&gt;# Stop current Server&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl stop minecraft.service

&lt;span class=&quot;c&quot;&gt;# Backup server&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;DATE_FORMAT&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;%F_%H-%M-%S&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;TIMESTAMP&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;date&lt;/span&gt; +&lt;span class=&quot;nv&quot;&gt;$DATE_FORMAT&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;SERVER_WORLDS&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/srv/minecraft-server/world
&lt;span class=&quot;nv&quot;&gt;BACKUP_DIRECTORY&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/home/brlamore/minecraft/backups
&lt;span class=&quot;nv&quot;&gt;ARCHIVE_FILE_NAME&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TIMESTAMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.tar.gz&quot;&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;ARCHIVE_PATH&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$BACKUP_DIRECTORY&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;/&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ARCHIVE_FILE_NAME&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Create Backup folder&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;mkdir&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-p&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;$(&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;dirname&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ARCHIVE_PATH&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;si&quot;&gt;)&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Backup world&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;tar&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-cf&lt;/span&gt; - &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;SERVER_WORLDS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; | &lt;span class=&quot;nb&quot;&gt;gzip&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-cv&lt;/span&gt; -&lt;span class=&quot;s2&quot;&gt;&quot;3&quot;&lt;/span&gt; - &lt;span class=&quot;o&quot;&gt;&amp;gt;&lt;/span&gt; &lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$ARCHIVE_PATH&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt; 2&amp;gt;&amp;gt; /dev/null

&lt;span class=&quot;c&quot;&gt;# Check status&lt;/span&gt;
&lt;span class=&quot;nv&quot;&gt;EXIT_CODES&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=(&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;${&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;PIPESTATUS&lt;/span&gt;&lt;span class=&quot;p&quot;&gt;[@]&lt;/span&gt;&lt;span class=&quot;k&quot;&gt;}&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;&quot;&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;)&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Download 1.19 jar from https://www.minecraft.net/en-us/download/server&lt;/span&gt;
wget https://piston-data.mojang.com/v1/objects/8f3112a1049751cc472ec13e397eade5336ca7ae/server.jar

&lt;span class=&quot;nb&quot;&gt;sudo mkdir&lt;/span&gt; /srv/minecraft-server/versions/1.19.4
&lt;span class=&quot;nb&quot;&gt;sudo mv &lt;/span&gt;server.jar /srv/minecraft-server/versions/1.19.4/server.1.19.4.jar
&lt;span class=&quot;nb&quot;&gt;sudo mv&lt;/span&gt; /srv/minecraft-server/server.jar &lt;span class=&quot;s2&quot;&gt;&quot;/srv/minecraft-server/versions/old/server.old.&lt;/span&gt;&lt;span class=&quot;nv&quot;&gt;$TIMESTAMP&lt;/span&gt;&lt;span class=&quot;s2&quot;&gt;.jar&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo cp&lt;/span&gt; /srv/minecraft-server/versions/1.19.4/server.1.19.4.jar /srv/minecraft-server/server.jar
&lt;span class=&quot;nb&quot;&gt;sudo chown&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; minecraft.minecraft /srv/minecraft-server

&lt;span class=&quot;c&quot;&gt;# Restart service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl start minecraft.service

&lt;span class=&quot;c&quot;&gt;# Get status&lt;/span&gt;
systemctl status minecraft.service 

&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;</content>

      
      
      
      
      

      <author>
          <name>Brig Lamoreaux</name>
        
        
      </author>

      

      
        <category term="cloud" />
      
        <category term="azure" />
      
        <category term="minecraft" />
      

      
        <summary type="html">It’s that time of year again when I need to update the minecraft server but I forgot how.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Minecraft Server</title>
      <link href="https://www.briglamoreaux.com/2022/07/31/minecraft-server.html" rel="alternate" type="text/html" title="Minecraft Server" />
      <published>2022-07-31T00:00:00+00:00</published>
      <updated>2022-07-31T00:00:00+00:00</updated>
      <id>https://www.briglamoreaux.com/2022/07/31/minecraft-server</id>
      <content type="html" xml:base="https://www.briglamoreaux.com/2022/07/31/minecraft-server.html">&lt;p&gt;Setting up minecraft on azure for fun.&lt;/p&gt;

&lt;p&gt;Setup Server&lt;/p&gt;

&lt;div class=&quot;language-bash highlighter-rouge&quot;&gt;&lt;div class=&quot;highlight&quot;&gt;&lt;pre class=&quot;highlight&quot;&gt;&lt;code&gt;
&lt;span class=&quot;c&quot;&gt;# Create linux server&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# tbd script&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# ssh server ip&lt;/span&gt;

&lt;span class=&quot;c&quot;&gt;# Install Java&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt update &lt;span class=&quot;o&quot;&gt;&amp;amp;&amp;amp;&lt;/span&gt; &lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt upgrade &lt;span class=&quot;nt&quot;&gt;-y&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;apt-get &lt;span class=&quot;nb&quot;&gt;install &lt;/span&gt;openjdk-16-jre-headless

&lt;span class=&quot;c&quot;&gt;# Setup User and dir&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;adduser &lt;span class=&quot;nt&quot;&gt;--system&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;--home&lt;/span&gt; /srv/minecraft-server minecraft
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;addgroup &lt;span class=&quot;nt&quot;&gt;--system&lt;/span&gt; minecraft
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;adduser minecraft minecraft &lt;span class=&quot;c&quot;&gt;# this adds user &quot;minecraft&quot; to the group &quot;minecraft&quot;&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo chown&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-R&lt;/span&gt; minecraft.minecraft /srv/minecraft-server

&lt;span class=&quot;c&quot;&gt;# Switch to user&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-H&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-u&lt;/span&gt; minecraft bash
&lt;span class=&quot;nb&quot;&gt;cd&lt;/span&gt; /srv/minecraft-server

&lt;span class=&quot;c&quot;&gt;# Download 1.19 jar from https://www.minecraft.net/en-us/download/server&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;#  wget https://launcher.mojang.com/v1/objects/e00c4052dac1d59a1188b2aa9d5a87113aaf1122/server.jar&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# mv server.jar minecraft_server.1.19.jar&lt;/span&gt;


&lt;span class=&quot;c&quot;&gt;# Create startup script&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;vi /etc/systemd/system/minecraft.service
&lt;span class=&quot;nb&quot;&gt;sudo chmod &lt;/span&gt;664 /etc/systemd/system/minecraft.service

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Unit] 
&lt;span class=&quot;nv&quot;&gt;Description&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;start and stop the minecraft-server 

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Service]
&lt;span class=&quot;nv&quot;&gt;WorkingDirectory&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/srv/minecraft-server
&lt;span class=&quot;nv&quot;&gt;User&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;minecraft
&lt;span class=&quot;nv&quot;&gt;Group&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;minecraft

&lt;span class=&quot;nv&quot;&gt;ExecStart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;/usr/bin/java &lt;span class=&quot;nt&quot;&gt;-Xms10G&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-Xmx10G&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:+UseG1GC &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:+ParallelRefProcEnabled &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:MaxGCPauseMillis&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;200 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:+UnlockExperimentalVMOptions &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:+DisableExplicitGC &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:+AlwaysPreTouch &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1NewSizePercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;30 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1MaxNewSizePercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;40 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1HeapRegionSize&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;8M &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1ReservePercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;20 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1HeapWastePercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;5 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1MixedGCCountTarget&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;4 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:InitiatingHeapOccupancyPercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;15 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1MixedGCLiveThresholdPercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;90 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:G1RSetUpdatingPauseTimePercent&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;5 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:SurvivorRatio&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;32 &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:+PerfDisableSharedMem &lt;span class=&quot;nt&quot;&gt;-XX&lt;/span&gt;:MaxTenuringThreshold&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;1 &lt;span class=&quot;nt&quot;&gt;-Dusing&lt;/span&gt;.aikars.flags&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;https://mcflags.emc.gs &lt;span class=&quot;nt&quot;&gt;-Daikars&lt;/span&gt;.new.flags&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;&lt;span class=&quot;nb&quot;&gt;true&lt;/span&gt; &lt;span class=&quot;nt&quot;&gt;-jar&lt;/span&gt; server.jar nogui

&lt;span class=&quot;nv&quot;&gt;Restart&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;on-failure
&lt;span class=&quot;nv&quot;&gt;RestartSec&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;20 5

&lt;span class=&quot;nv&quot;&gt;StandardInput&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;null

&lt;span class=&quot;o&quot;&gt;[&lt;/span&gt;Install]
&lt;span class=&quot;nv&quot;&gt;WantedBy&lt;/span&gt;&lt;span class=&quot;o&quot;&gt;=&lt;/span&gt;multi-user.target

&lt;span class=&quot;c&quot;&gt;# ...&lt;/span&gt;
&lt;span class=&quot;c&quot;&gt;# Enable service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl &lt;span class=&quot;nb&quot;&gt;enable &lt;/span&gt;minecraft.service

&lt;span class=&quot;c&quot;&gt;# Start service&lt;/span&gt;
&lt;span class=&quot;nb&quot;&gt;sudo &lt;/span&gt;systemctl start minecraft.service

&lt;span class=&quot;c&quot;&gt;# Get status&lt;/span&gt;
systemctl status minecraft.service 


&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;&lt;/div&gt;

&lt;h1 id=&quot;references&quot;&gt;References&lt;/h1&gt;
&lt;ul&gt;
  &lt;li&gt;https://minecraft.fandom.com/wiki/Tutorials/Setting_up_a_server&lt;/li&gt;
  &lt;li&gt;Startup scripts https://gist.github.com/dotStart/ea0455714a0942474635&lt;/li&gt;
&lt;/ul&gt;</content>

      
      
      
      
      

      <author>
          <name>Brig Lamoreaux</name>
        
        
      </author>

      

      
        <category term="cloud" />
      
        <category term="azure" />
      
        <category term="minecraft" />
      

      
        <summary type="html">Setting up minecraft on azure for fun.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Cost Optimization Maturity Model</title>
      <link href="https://www.briglamoreaux.com/2022/06/10/cost-optimization-maturity-model.html" rel="alternate" type="text/html" title="Cost Optimization Maturity Model" />
      <published>2022-06-10T00:00:00+00:00</published>
      <updated>2022-06-10T00:00:00+00:00</updated>
      <id>https://www.briglamoreaux.com/2022/06/10/cost-optimization-maturity-model</id>
      <content type="html" xml:base="https://www.briglamoreaux.com/2022/06/10/cost-optimization-maturity-model.html">&lt;p&gt;In my experience working with Azure global enterprise customers, I see organizations move through several phases of cloud cost-optimization.&lt;/p&gt;

&lt;h2 id=&quot;phase-1---freaking-out&quot;&gt;Phase 1 - Freaking Out&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-phase1.png&quot; alt=&quot;Phase 1 - Awareness&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The first phase is moving to the cloud and watching the bill grow over time without understanding why. There is not much to do in this phase other than completely ignoring the slowly growing problem or asking for help.&lt;/p&gt;

&lt;h2 id=&quot;phase-2---finding-tools&quot;&gt;Phase 2 - Finding Tools&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-phase2.png&quot; alt=&quot;Phase 2 - Tools&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Learning about cost management tools distinguishes Phase 2 from Phase 1. Azure includes tools like:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Documentation of Best Practices&lt;/li&gt;
  &lt;li&gt;Azure Advisor&lt;/li&gt;
  &lt;li&gt;Azure Cost Management and Billing Portal&lt;/li&gt;
  &lt;li&gt;Azure Cost Management (Power BI App)&lt;/li&gt;
  &lt;li&gt;Power BI Cost Management Connector (Power BI Desktop)&lt;/li&gt;
  &lt;li&gt;Well-Architected Framework Cost Optimization Workbook&lt;/li&gt;
  &lt;li&gt;Additional Tools&lt;/li&gt;
&lt;/ul&gt;

&lt;h3 id=&quot;documentation&quot;&gt;Documentation&lt;/h3&gt;

&lt;p&gt;The &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/cloud-adoption-framework/&quot;&gt;Microsoft Cloud Adoption Framework &lt;/a&gt;(CAF) and the &lt;a href=&quot;https://aka.ms/architecture/framework&quot;&gt;Microsoft Azure Well-Architected Framework&lt;/a&gt;(WAF) are excellent sources for cost management best practices.&lt;/p&gt;

&lt;h3 id=&quot;azure-advisor&quot;&gt;Azure Advisor&lt;/h3&gt;

&lt;p&gt;&lt;a href=&quot;https://azure.microsoft.com/en-us/services/advisor/&quot;&gt;Azure Advisor&lt;/a&gt; is my number one go-to product for cost optimization. It monitors predefined best practices, alerts on exceptions, and allows you to remediate issues. In addition, it provides cost recommendations based on your usage and configurations:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Shut down unused VMs&lt;/li&gt;
  &lt;li&gt;Rightsize underused VMs&lt;/li&gt;
  &lt;li&gt;Buy Reserved Instances for consistent resources&lt;/li&gt;
  &lt;li&gt;Delete idle network gateways&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-advisor.png&quot; alt=&quot;Azure Advisor&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Review Advisor recommendations in the Azure portal: &lt;a href=&quot;https://aka.ms/azureadvisor&quot;&gt;aka.ms/azureadvisor&lt;/a&gt;&lt;/p&gt;

&lt;h3 id=&quot;azure-cost-management-and-billing-portal&quot;&gt;Azure Cost Management and Billing Portal&lt;/h3&gt;

&lt;p&gt;I can’t keep up with all of the new features in the &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/cost-management-billing/&quot;&gt;Azure Cost Management and Billing Portal&lt;/a&gt;(ACM). Use it to:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Explore Cost&lt;/li&gt;
  &lt;li&gt;Manage Reservations&lt;/li&gt;
  &lt;li&gt;Set spending thresholds and more&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-cost_management_billing.png&quot; alt=&quot;Azure Advisor&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;azure-cost-management--billing-power-bi-app&quot;&gt;Azure Cost Management + Billing Power BI App&lt;/h3&gt;

&lt;p&gt;An azure enterprise agreement administrator can run the &lt;a href=&quot;https://docs.microsoft.com/en-us/azure/cost-management-billing/costs/analyze-cost-data-azure-cost-management-power-bi-template-app&quot;&gt;Azure Cost Management (ACM) Power BI template application&lt;/a&gt; by logging into the Power BI Service at https://powerbi.com. The solution connects to the Azure Billing API and has pre-configured reports:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Account overview&lt;/li&gt;
  &lt;li&gt;Consumed Usage by Subscriptions and Resource Groups&lt;/li&gt;
  &lt;li&gt;Top 5 Usage drivers&lt;/li&gt;
  &lt;li&gt;Consumed Usage by Services&lt;/li&gt;
  &lt;li&gt;Windows Server Hybrid License Usage&lt;/li&gt;
  &lt;li&gt;VM RI Coverage (shared and single recommendation)&lt;/li&gt;
  &lt;li&gt;RI Savings, Chargeback, purchases&lt;/li&gt;
  &lt;li&gt;Price sheet&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;You can also create ad hoc reports using the underlying data. I will use the ACM Power BI Template App to show off how to slice and dice billing data for customers looking for specialized reports.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-amc_pbi_app.png&quot; alt=&quot;ACM Power BI Template App&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;azure-cost-management-connector-for-power-bi&quot;&gt;Azure Cost Management Connector for Power BI&lt;/h3&gt;

&lt;p&gt;When I can’t slice and dice the way I want with the ACM Power BI Template App, I  connect to the billing data directly with the Power BI desktop using the &lt;a href=&quot;https://docs.microsoft.com/en-us/power-bi/connect-data/desktop-connect-azure-cost-management&quot;&gt;Cost Management Connector for Power BI&lt;/a&gt;. The connector lets me split and join columns, aggregate data, cleanse data, and any other data preparation I need. Not only can I manipulate the billing data, but I can also join external data sources with my data to create more meaningful reports.&lt;/p&gt;

&lt;p&gt;When a tricky request comes in, like a &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;point-in-time comparison&lt;/code&gt; report, I fire up Power BI Desktop to do the job.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-azure-cost-management-connector.png&quot; alt=&quot;ACM Power BI Template App&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;waf-cost-optimzation-workbook&quot;&gt;WAF Cost Optimzation Workbook&lt;/h3&gt;

&lt;p&gt;Microsoft has a service where engineers can sit with customers to analyze their environment. One tool the team uses is the Well-Architected Framework (WAF) Cost Optimization Workbook. The workbook is deployed into Azure Monitor and queries Azure logs and the Azure Graph API to inspect the current environment. Some of the reports include:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Idle/unattached items&lt;/li&gt;
  &lt;li&gt;Orphaned resources&lt;/li&gt;
  &lt;li&gt;Unattached Public IPs&lt;/li&gt;
  &lt;li&gt;Hybrid benefits and more&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-amc_pbi_app.png&quot; alt=&quot;ACM Power BI Template App&quot; /&gt;&lt;/p&gt;

&lt;h3 id=&quot;additional-tools&quot;&gt;Additional Tools&lt;/h3&gt;

&lt;p&gt;Other goto tools to help better understand costs include&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;&lt;a href=&quot;https://azure.microsoft.com/en-us/pricing/calculator/&quot;&gt;Azure Pricing Calculator&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/azure/migrate/&quot;&gt;Azure Migrate&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;&lt;a href=&quot;https://docs.microsoft.com/en-us/hybrid/&quot;&gt;Azure Hybrid Benefits&lt;/a&gt;&lt;/li&gt;
  &lt;li&gt;And more&lt;/li&gt;
&lt;/ul&gt;

&lt;h2 id=&quot;phase-3---outgrowing-the-tools&quot;&gt;Phase 3 - Outgrowing the Tools&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-phase3.png&quot; alt=&quot;Phase 3 - Outgrowing tools&quot; /&gt;&lt;/p&gt;

&lt;p&gt;At some point, the tools either fail to provide needed information or are overwhelmed by the amount of data. In my experience, this moment comes when an organization reaches the $2M / month in consumption and the file size for billing data approaches 2-3GB. Excel and PowerBI start to slow down with files this large.&lt;/p&gt;

&lt;p&gt;Organizations stay in Phase 3 for various reasons before moving out. The primary reason organizations remain in Phase 3 is because of the coordinating effort to integrate cost-management as part of the strategy and culture of the organization as opposed to looking at it as a one-off activity.&lt;/p&gt;

&lt;h2 id=&quot;phase-4---create-a-new-tool&quot;&gt;Phase 4 - Create a New Tool&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-phase4.png&quot; alt=&quot;Phase 4 - New Tool&quot; /&gt;&lt;/p&gt;

&lt;p&gt;When I faced this phase several years ago, I designed and &lt;a href=&quot;https://github.com/briglx/AzureBillingReports&quot;&gt;implemented a solution&lt;/a&gt; using my background in big data. After deploying it, I interviewed colleagues in other large organizations asking how they solved the problem. The responses were consistent with my solution’s modern data warehouse pipeline architecture.&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-big-data-arch.png&quot; alt=&quot;Big Data Enterprise Solution&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This scalable solution can:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Ingest data from multiple data sources&lt;/li&gt;
  &lt;li&gt;Process and enrich the data&lt;/li&gt;
  &lt;li&gt;Persist data in a long-term database&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;Deploying the pipeline creates more overhead, however, it solves diverse challenges making the cost well worth the benefit. The pipeline scales to ingest growing billing data and growing data sources. Reports are lighting fast because the database is hyper-tuned to the most common queries. This new tool solves most problems but can not fix the one in the next phase.&lt;/p&gt;

&lt;h2 id=&quot;phase-5---wrong-audience&quot;&gt;Phase 5 - Wrong Audience&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-phase5.png&quot; alt=&quot;Phase 5 - Wong Audience&quot; /&gt;&lt;/p&gt;

&lt;p&gt;Phase 5 is a cycle of cost-cutting and organic growth. The behavior can show up anytime during the maturity growth phases because it is more of a mindset about cost management instead of a limitation of the tools. I put it here because implementing a big-data pipeline is less complicated than changing the hearts and minds of an entire organization.&lt;/p&gt;

&lt;p&gt;Moving through this phase will require:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Teams focusing on delivering value&lt;/li&gt;
  &lt;li&gt;Organizations to understand that spending money is not a problem&lt;/li&gt;
  &lt;li&gt;Providing different tools to different audiences&lt;/li&gt;
  &lt;li&gt;Leaders to execute against a Strategy&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;A good leader does not want to arbitrarily cut costs because it negatively impacts teams, is a poor way to measure successful business impact and lacks a strategy.&lt;/p&gt;

&lt;p&gt;Unpredictable cost-cutting impacts teams by taking away time from activities that create business value. In addition, cost-cutting forces cost-efficient teams to sacrifice reliability, functionality, or security to meet the cost-cutting goals.&lt;/p&gt;

&lt;p&gt;Measuring cost is an important part of running a successful business but is the wrong measurement for the various departments delivering business impact. Executives, operation teams, development teams, and analysts have different needs.&lt;/p&gt;

&lt;p&gt;Generally, executives have no problem spending money on an investment they trust. The cycle of cost-cutting and organic growth indicates a lack of confidence in the cloud and the team managing it. Leaders need key performance indicators (KPIs)s focused on business best practices to help them trust the cloud investment.&lt;/p&gt;

&lt;p&gt;Cloud operation teams need to monitor and enforce corporate standards and policies. They want tools to help them with chargeback models of cloud costs.&lt;/p&gt;

&lt;p&gt;Development teams need reports that show how to comply with standards, implement best practices, and remediate alerts. Teams also need the flexibility to integrate small positive changes each sprint without impacting feature development.&lt;/p&gt;

&lt;p&gt;Analysts need tools to explore the data and find edge cases to inform future strategies.&lt;/p&gt;

&lt;p&gt;Each department has different priorities around understading cloud usage and cost, performance tracking, and cloud optimization. The key is to move from arbitrary cost-cutting to a clear strategy.&lt;/p&gt;

&lt;h3 id=&quot;define-a-strategy&quot;&gt;Define a Strategy&lt;/h3&gt;

&lt;p&gt;Moving from seeking and destroying cost to strategic thinking requires a three-phased approach:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Define Best Practices&lt;/li&gt;
  &lt;li&gt;Measure and Monitor&lt;/li&gt;
  &lt;li&gt;Remediate&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-strategy.png&quot; alt=&quot;Three phased Approach&quot; /&gt;&lt;/p&gt;

&lt;p&gt;This method extends the capability of Azure Advisor to include custom business best practices.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Best Practices&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;Define best practices agnostic to technology and in a way everyone can agree on. For example:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;Turn off Development Machines on the Weekend&lt;/li&gt;
  &lt;li&gt;Resize VMs to have high utilization&lt;/li&gt;
  &lt;li&gt;Apply reservations recommendations&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;See &lt;a href=&quot;https://aka.ms/architecture/framework&quot;&gt;https://aka.ms/architecture/framework&lt;/a&gt; for more.&lt;/p&gt;

&lt;p&gt;&lt;strong&gt;Measure and Monitor&lt;/strong&gt;&lt;/p&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-measure-monitor.png&quot; alt=&quot;Measure and Monitor&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The best visualizations provide essential information each department needs. Reports designed to build trust for executives should show the current status of a best practice and the historical progress. Provide visualization that provides information needed to make real-time decisions.&lt;/p&gt;

&lt;p&gt;Organizations move out of phase 5 when it replaces the mindset of seeking-and-destroying costs to strategically monitor and measuring best practices.&lt;/p&gt;

&lt;h2 id=&quot;phase-6---recipies&quot;&gt;Phase 6 - Recipies&lt;/h2&gt;

&lt;p&gt;&lt;img src=&quot;https://www.briglamoreaux.com/assets/images/20220713-cloud-maturity-phase6.png&quot; alt=&quot;Phase 6 - Recipies&quot; /&gt;&lt;/p&gt;

&lt;p&gt;The last phase in the maturity model is when an organization can scale developing reports that measure best practices. Scaling will require centralizing data collection, a common data schema, and discoverability. In this environment, teams can create, discover, and share new reports.&lt;/p&gt;</content>

      
      
      
      
      

      <author>
          <name>Brig Lamoreaux</name>
        
        
      </author>

      

      
        <category term="cloud" />
      
        <category term="cost" />
      
        <category term="optimization" />
      
        <category term="finops" />
      
        <category term="azure" />
      

      
        <summary type="html">In my experience working with Azure global enterprise customers, I see organizations move through several phases of cloud cost-optimization.</summary>
      

      
      
    </entry>
  
    <entry>
      <title type="html">Finding Public IP Details</title>
      <link href="https://www.briglamoreaux.com/2022/06/10/finding-public-ip-details.html" rel="alternate" type="text/html" title="Finding Public IP Details" />
      <published>2022-06-10T00:00:00+00:00</published>
      <updated>2022-06-10T00:00:00+00:00</updated>
      <id>https://www.briglamoreaux.com/2022/06/10/finding-public-ip-details</id>
      <content type="html" xml:base="https://www.briglamoreaux.com/2022/06/10/finding-public-ip-details.html">&lt;p&gt;I was recently asked how to query Azure Resource Graph to find details about what a public ip is associated to.&lt;/p&gt;

&lt;p&gt;The goal is to see the different types of resources public ips are assocaited like:&lt;/p&gt;

&lt;ul&gt;
  &lt;li&gt;VMs&lt;/li&gt;
  &lt;li&gt;Scalesets&lt;/li&gt;
  &lt;li&gt;Bastion hosts&lt;/li&gt;
  &lt;li&gt;gateways&lt;/li&gt;
  &lt;li&gt;etc&lt;/li&gt;
  &lt;li&gt;not associated.&lt;/li&gt;
&lt;/ul&gt;

&lt;p&gt;After playing around with the query languange and discovering that it doesn’t implement the entire language, no &lt;code class=&quot;language-plaintext highlighter-rouge&quot;&gt;let&lt;/code&gt; keyword, I came up with the following:&lt;/p&gt;

&lt;pre&gt;&lt;code class=&quot;language-kusto&quot;&gt;resources 
| where type =~ 'Microsoft.Network/publicIPAddresses'
| project  
    id, 
    joinId = iff(isempty(properties.ipConfiguration.id), '', tolower(strcat('/', strcat_array(array_slice(split(properties.ipConfiguration.id,'/'), 1, -3), '/')))),
    orphaned = iff(isempty(properties.ipConfiguration.id), true, false),
    pubipname = name, 
    resourceGroup,
    ipAddress = properties.ipAddress
| extend _provider = iff(orphaned, dynamic([{}]), split(split(joinId, 'providers')[1], '/'))
| extend associated_to_provider = iif(orphaned, '', strcat_delim('/',_provider[1], _provider[2]))
| join kind=leftouter(
    resources
    | project id = tolower(id), name 
    ) on $left.joinId == $right.id
| project 
    id, name = pubipname, ipAddress, orphaned,  associated_to_name = name, associated_to_provider, associated_to_id = joinId
&lt;/code&gt;&lt;/pre&gt;

&lt;p&gt;This creates a result of:&lt;/p&gt;

&lt;table&gt;
  &lt;thead&gt;
    &lt;tr&gt;
      &lt;th&gt;ID&lt;/th&gt;
      &lt;th&gt;NAME&lt;/th&gt;
      &lt;th&gt;IPADDRESS&lt;/th&gt;
      &lt;th&gt;ORPHANED&lt;/th&gt;
      &lt;th&gt;ASSOCIATED_TO_NAME&lt;/th&gt;
      &lt;th&gt;ASSOCIATED_TO_PROVIDER&lt;/th&gt;
      &lt;th&gt;ASSOCIATED_TO_ID&lt;/th&gt;
    &lt;/tr&gt;
  &lt;/thead&gt;
  &lt;tbody&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/ASI-RG/providers/Microsoft.Network/publicIPAddresses/SyslogAgent-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;SyslogAgent-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;syslogagent126&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/asi-rg/providers/microsoft.network/networkinterfaces/syslogagent126&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/ASI-RG/providers/Microsoft.Network/publicIPAddresses/SyslogAgent2-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;SyslogAgent2-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;SyslogAgent2-nic&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/asi-rg/providers/microsoft.network/networkinterfaces/syslogagent2-nic&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/ASI-RG/providers/Microsoft.Network/publicIPAddresses/sentinelagent1-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;sentinelagent1-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;sentinelagent1-nic&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/asi-rg/providers/microsoft.network/networkinterfaces/sentinelagent1-nic&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/Telegraf-InfluxDB-Grafana/providers/Microsoft.Network/publicIPAddresses/Telegraf-InfluxDB-Grafana-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;Telegraf-InfluxDB-Grafana-ip&lt;/td&gt;
      &lt;td&gt;104.210.56.85&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;telegraf-influxdb-gr68&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/telegraf-influxdb-grafana/providers/microsoft.network/networkinterfaces/telegraf-influxdb-gr68&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/blxBilling/providers/Microsoft.Network/publicIPAddresses/PowerBIReports-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;PowerBIReports-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;powerbireports726&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/blxbilling/providers/microsoft.network/networkinterfaces/powerbireports726&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/blxBilling/providers/Microsoft.Network/publicIPAddresses/bastionHosts&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;bastionHosts&lt;/td&gt;
      &lt;td&gt;192.168.17.43&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;blxBillingvnet425-bastion&lt;/td&gt;
      &lt;td&gt;microsoft.network/bastionhosts&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/blxbilling/providers/microsoft.network/bastionhosts/blxbillingvnet425-bastion&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/confluence/providers/Microsoft.Network/publicIPAddresses/confluence&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;confluence&lt;/td&gt;
      &lt;td&gt;192.168.17.45&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;confluence768&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/confluence/providers/microsoft.network/networkinterfaces/confluence768&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/confluence/providers/Microsoft.Network/publicIPAddresses/confluence-app-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;confluence-app-ip&lt;/td&gt;
      &lt;td&gt;192.168.17.4&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;confluence-app991&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/confluence/providers/microsoft.network/networkinterfaces/confluence-app991&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/confluence/providers/Microsoft.Network/publicIPAddresses/confluence-database&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;confluence-database&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;confluence-database729&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/confluence/providers/microsoft.network/networkinterfaces/confluence-database729&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/Ubuntu2-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;Ubuntu2-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;ubuntu2105&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/ubuntu2105&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/aerotest-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;aerotest-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;aerotest635&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/aerotest635&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/blxlogtest-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;blxlogtest-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;blxlogtest803&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/blxlogtest803&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/buildmachine-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;buildmachine-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;buildmachine966&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/buildmachine966&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/development-vnet-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;development-vnet-ip&lt;/td&gt;
      &lt;td&gt;192.168.17.5&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;development-vnet-bastion&lt;/td&gt;
      &lt;td&gt;microsoft.network/bastionhosts&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/bastionhosts/development-vnet-bastion&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/devpubip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;devpubip&lt;/td&gt;
      &lt;td&gt;192.168.17.100&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;devgateway&lt;/td&gt;
      &lt;td&gt;microsoft.network/virtualnetworkgateways&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/virtualnetworkgateways/devgateway&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/homeassistant-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;homeassistant-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;homeassistant92&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/homeassistant92&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/mongodb-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;mongodb-ip&lt;/td&gt;
      &lt;td&gt;192.168.17.200&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/mytestpolicyvm-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;mytestpolicyvm-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;mytestpolicyvm172&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/mytestpolicyvm172&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/myubuntu-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;myubuntu-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;myubuntu718&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/myubuntu718&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/ubuntu-pip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;ubuntu-pip&lt;/td&gt;
      &lt;td&gt;192.168.17.201&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;ubuntu194&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/ubuntu194&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/ubuntu1704-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;ubuntu1704-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;ubuntu1704435&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/ubuntu1704435&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/development/providers/Microsoft.Network/publicIPAddresses/ubuntu17102-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;ubuntu17102-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;ubuntu17102672&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/development/providers/microsoft.network/networkinterfaces/ubuntu17102672&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/logic_demo/providers/Microsoft.Network/publicIPAddresses/kafka-vm-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;kafka-vm-ip&lt;/td&gt;
      &lt;td&gt;192.168.17.204&lt;/td&gt;
      &lt;td&gt;1&lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
      &lt;td&gt; &lt;/td&gt;
    &lt;/tr&gt;
    &lt;tr&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourceGroups/logic_demo/providers/Microsoft.Network/publicIPAddresses/testkafka-ip&lt;/subscription_id&gt;&lt;/td&gt;
      &lt;td&gt;testkafka-ip&lt;/td&gt;
      &lt;td&gt;null&lt;/td&gt;
      &lt;td&gt;0&lt;/td&gt;
      &lt;td&gt;testkafka258&lt;/td&gt;
      &lt;td&gt;microsoft.network/networkinterfaces&lt;/td&gt;
      &lt;td&gt;/subscriptions/&lt;subscription_id&gt;/resourcegroups/logic_demo/providers/microsoft.network/networkinterfaces/testkafka258&lt;/subscription_id&gt;&lt;/td&gt;
    &lt;/tr&gt;
  &lt;/tbody&gt;
&lt;/table&gt;</content>

      
      
      
      
      

      <author>
          <name>Brig Lamoreaux</name>
        
        
      </author>

      

      
        <category term="cloud" />
      
        <category term="kusto" />
      
        <category term="azure" />
      

      
        <summary type="html">I was recently asked how to query Azure Resource Graph to find details about what a public ip is associated to.</summary>
      

      
      
    </entry>
  
</feed>
